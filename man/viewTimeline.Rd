% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/runExample.R
\name{viewTimeline}
\alias{viewTimeline}
\title{Launch Timeline Viewer with Custom Database Connections}
\usage{
viewTimeline(
  cdw_conn,
  mpi_conn = NULL,
  db_type = c("mssql", "duckdb"),
  background = TRUE,
  port = 3838,
  launch.browser = TRUE,
  ...
)
}
\arguments{
\item{cdw_conn}{A DBI connection object to the CDW (PCORnet CDM) database.
This connection must have access to the PCORnet CDM tables (DEMOGRAPHIC,
ENCOUNTER, DIAGNOSIS, etc.).}

\item{mpi_conn}{A DBI connection object to the MPI (Master Patient Index)
database. Optional - can be NULL if MPI data is not available, or the
same as cdw_conn if MPI tables are in the same database.}

\item{db_type}{The database type, either "mssql" or "duckdb". This affects
query parameter syntax and schema qualification. Note: DuckDB connections
always run in blocking mode (background = FALSE) due to DuckDB's file
locking constraints.}

\item{background}{Logical. If TRUE (the default for MSSQL), runs the app in a
background R process, allowing you to continue working in your R session.
The app URL will be printed and opened in your browser. Use
\code{\link{stopViewer}} to stop the background app. If FALSE, runs in
the current session (blocking). Note: This parameter is ignored for DuckDB
connections, which always run in blocking mode.}

\item{port}{The TCP port for the Shiny app. Default is 3838. Only used when
background = TRUE.}

\item{launch.browser}{Logical. Should the app be opened in a browser?
Default is TRUE.}

\item{...}{Additional arguments passed to \code{\link[shiny]{runApp}}.}
}
\value{
If background = TRUE, returns invisibly a list with the process
handle and URL. If background = FALSE, does not return (blocks until
app closes).
}
\description{
Launch the Patient Timeline Viewer Shiny application using user-supplied
database connections instead of reading from config.yml. This is useful
when running from Quarto documents or when you want to connect to multiple
databases in the same session.
}
\examples{
\dontrun{
# Example 1: From a Quarto document with ODBC connection (non-blocking)
library(DBI)
library(odbc)

cdw <- dbConnect(odbc(), "MY_CDW_DSN")
DBI::dbExecute(cdw, "USE CDW")

viewTimeline(cdw_conn = cdw, mpi_conn = cdw, db_type = "mssql")
# App runs in background, continue working...

# When done:
stopViewer()

# Example 2: Blocking mode (traditional Shiny behavior)
viewTimeline(cdw_conn = cdw, db_type = "mssql", background = FALSE)

# Example 3: DuckDB (always runs in blocking mode)
library(duckdb)

cdw <- dbConnect(duckdb(), "path/to/cdw.duckdb")
mpi <- dbConnect(duckdb(), "path/to/mpi.duckdb")

# DuckDB doesn't support background mode due to file locking
# The app will run in blocking mode regardless of background setting
viewTimeline(cdw_conn = cdw, mpi_conn = mpi, db_type = "duckdb")
}

}
\seealso{
\code{\link{stopViewer}} to stop a background viewer
}
